(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[43432],{

/***/ 666647:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(738123);__web_req__(152531);self._5f74ec40302898c5a55451c9fbd04240 = self._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var c1=__c.c1;var M=__c.M;
var wIc=async function(a,b){const c=a.Bpb;if(c==null)throw Error("Scene document resources are not supported");return a.eca(b,async()=>{const d=await c.Fq({id:b,version:1},void 0),e={id:d.id,files:{yYa:d.content.url,W6a:d.Rc.url}};(0,__c.$b)(()=>{a.scenes.set(e.id,e)});return e})},xIc=function(a,b,c){let d=b-1,e=0,f=c-1,g=0;for(let h=0;h<c;h++)for(let k=0;k<b;k++)a[3+(h*b+k)*4]!==0&&(d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h));a=g-f+1;return{left:d,top:c-(f+a),width:e-d+1,height:a}},
yIc=function(a){if(a.store.Ae){const b=requestAnimationFrame(()=>yIc(a));a.store.sda=b;a.render(!0)}},BIc=function({vY:a,Hk:b}){const c=new zIc;return new AIc(c,a,b)},CIc=function(a){var b=__c.y(a.store.container,"Missing container"),c=a.zh.SX;b.style.width=2E3*a.zh.ba+"px";b.style.height=2E3*a.zh.ba+"px";b.style.left=`-${c.left*a.zh.ba}px`;b.style.top=`-${c.top*a.zh.ba}px`;b.style.position="absolute";b=a.zh;a=a.store.eT;c=a.getContext("2d");if(!c)throw Error("Unable to create 2d context");b.render(!1);
a.width=b.Hk.canvas.width;a.height=b.Hk.canvas.height;c.drawImage(b.Hk.canvas,0,0,b.Hk.canvas.width,b.Hk.canvas.height)},DIc=function(a){var b=__c.y(a.store.container,"Missing container");b.style.position="init";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";b=a.zh;a=a.store.eT;$7(b.Hk);const c=a.getContext("2d");if(!c)throw Error("Unable to create 2d context");b.render(!1);const d=b.wza();a.width=d.width;a.height=d.height;c.drawImage(b.Hk.canvas,d.left,d.top,d.width,
d.height,0,0,d.width,d.height);$7(b.Hk)},FIc=async function(a){a=new EIc(a,{environment_sdr:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_sdr.png",environment_gain:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_gain.png"});await a.load();return a},GIc=function(a){const b=a.On;a=__c.yN.create({...__c.tD,image:{...__c.HBb,media:{id:a.eI,version:1},nb:void 0}});return a8(b,{fill:a})},PIc=function({Bo:a,vY:b,Vy:c,Hk:d}){const e=
new HIc,f=new IIc(e,a,JIc,c,b,d),g=KIc({local:a.Mn.local}),h=LIc({local:a.Mn.local}),k=()=>a8("div",{children:"Error"});return MIc(()=>{b8(()=>{f.initialize();return()=>{f.destroy()}},[]);switch(f.swa){case 1:return a8(h,{});case 3:return a8(NIc,{l7:f.l7||""});case 0:return a8(g,{});case 2:return a8(GIc,{On:a.On,eI:f.Tab||""});case 4:return a8(OIc,{});case 5:return a8(k,{});default:throw new __c.E(f.swa);}})},TIc=function(a){return MIc(({data:b,We:{On:c},Ei:{se:d}})=>{const [e,f]=QIc(),[g,h]=QIc();
b8(()=>{const k=new RIc(b,d,c),l=PIc({Bo:k,...a});f(l);h(k)},[]);b8(()=>{g&&SIc(()=>{g.Mn=b;g.se=d;g.On=c})},[g,b,d,c]);return e?a8(e,{}):a8("span",{})})},$7=function(a){a.fK.width=2E3;a.fK.height=2E3},XIc=async function(a){await UIc({path:VIc});try{a.Gsa=new WIc(a.bPb,{})}catch(b){throw a.I.Lb("Failed to create WebGL renderer"),Error("Failed to create WebGL renderer");}},c8=__webpack_require__(946863),UIc=c8.Ay,EIc=c8.IB,WIc=c8.ly,YIc=c8.tV;var d8=__webpack_require__(186901),ZIc=d8.EW,SIc=d8.h5,e8=d8.mJ,f8=d8.sH,g8=d8.XI;var a8=__webpack_require__(405148).jsx;var $Ic=__webpack_require__(227200),b8=$Ic.useEffect,aJc=$Ic.useRef,QIc=$Ic.useState;var MIc=__webpack_require__(371201).PA;var VIc=__webpack_require__(107745).A;var bJc=class{constructor(a){this.Hk=a}};var cJc=class{static D(a){M(a,{selected:f8.ref,yeb:f8.ref,Fia:f8.ref,WBa:f8.ref,Gqa:f8.ref})}constructor(a){this.zh=a;this.selected=(cJc.D(this),!1);this.WBa=this.Fia=this.yeb=!1;this.Gqa=0}};var AIc=class{static D(a){M(a,{initialize:g8,rrb:g8,VJa:g8,M$a:g8,dispose:g8,wza:g8,dbb:g8})}initialize(a){this.store.Aub=a;if(!this.store.nia){a=this.store;var b=this.vY;var c=this.store.Aub;if(b.Hk.ofb&&c instanceof EIc)b=new YIc(b.Hk.ofb,c);else throw Error("GltfResource needs GltfResource");a.nia=b}$7(this.Hk);this.store.isInitialized=!0}rrb(a){$7(this.Hk);this.store.SX=this.wza();this.store.ba=a;this.dbb()}get SX(){return this.store.SX}VJa(){this.store.Ae=!1;this.store.sda!=null&&(cancelAnimationFrame(this.store.sda),
this.store.sda=void 0)}M$a(a){this.store.qQ=a}dispose(){this.VJa();this.store.nia?.dispose();this.store.nia=void 0;this.store.isInitialized=!1}wza(){if(this.store.Rda&&this.store.qQ===this.store.Rda?.uFb)return this.store.Rda.ja;this.render(!1);var a=this.Hk.getImageData();a=this.ltb(a.data,a.width,a.height);this.store.Rda={uFb:this.store.qQ,ja:a};return a}get isInitialized(){return this.store.isInitialized}get Ae(){return this.store.Ae}get ba(){return this.store.ba}dbb(){this.VJa();this.store.Ae=
!0;yIc(this)}render(a){this.store.nia?.render({distance:1,rotationPhi:this.store.qQ.rotation.x,rotationTheta:this.store.qQ.rotation.y,enableGrid:a})}constructor(a,b,c,d=xIc){this.store=a;this.vY=b;this.Hk=c;this.ltb=d;AIc.D(this)}};var zIc=class{static D(a){M(a,{Ae:f8.ref,qQ:f8.ref,sda:f8.ref,RJb:f8.ref,Rda:f8.ref,isInitialized:f8.ref,ba:f8.ref,SX:f8.ref})}constructor(){this.container=(zIc.D(this),void 0);this.Ae=!1;this.qQ={rotation:{x:0,y:0,z:0}};this.RJb=document.createElement("canvas");this.isInitialized=!1;this.ba=1;this.SX={left:0,top:0,width:1,height:1}}};var NIc=({l7:a})=>a8("img",{src:a,alt:"Initial Snapshot",style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}});var OIc=()=>a8("div",{className:"_4Wsohg"});var dJc=({zCb:a,yCb:b})=>{const c=aJc(null);b8(()=>{const d=c.current;c.current&&a(c.current);return()=>{d&&b()}},[c,a,b]);return a8("div",{ref:c,style:{display:"block",position:"absolute"}})};var eJc=class{get zh(){return this.local.zh}constructor(a){this.local=a;this.Nub=b=>{var c=this.zh.SX;b.style.width=2E3*this.zh.ba+"px";b.style.height=2E3*this.zh.ba+"px";b.style.left=`-${c.left*this.zh.ba}px`;b.style.top=`-${c.top*this.zh.ba}px`;c=this.zh;c.store.container=b;b.contains(c.Hk.canvas)||b.appendChild(c.Hk.canvas)};this.Mub=()=>{var b=this.zh;b.store.container?.removeChild(b.Hk.canvas);b.store.container=void 0}}};var LIc=({local:a})=>{const b=new eJc(a);return()=>a8(dJc,{zCb:b.Nub,yCb:b.Mub})};var fJc=({eT:a,ZCb:b,onDispose:c})=>{const d=aJc(null);b8(()=>{d.current&&b(d.current);return()=>c()},[d,b,c]);b8(()=>{d.current&&(a.style.width="100%",a.style.height="100%",d.current.appendChild(a))},[d,a]);return a8("div",{ref:d,style:{width:"100%",height:"100%"}})};var gJc=class{static D(a){M(a,{initialize:g8.bound,dispose:g8.bound})}initialize(a){this.store.container=a;this.store.sVa=e8(()=>[this.zh.store.qQ,this.zh.Ae],this.Rub,{fireImmediately:!1});this.store.qVa=e8(()=>this.local.Fia,this.Oub,{fireImmediately:!0})}dispose(){this.store.sVa?.();this.store.sVa=void 0;this.store.qVa?.();this.store.qVa=void 0}get eT(){return this.store.eT}get zh(){return this.local.zh}constructor(a,b){this.store=a;this.local=b;this.Rub=(gJc.D(this),()=>{this.zh.Ae||(this.local.Fia?
CIc(this):DIc(this))});this.Oub=()=>{this.local.Fia?CIc(this):DIc(this)}}};var hJc=class{constructor(){this.eT=document.createElement("canvas")}};var KIc=({local:a})=>{const b=new hJc,c=new gJc(b,a);return()=>a8(fJc,{ZCb:c.initialize,onDispose:c.dispose,eT:c.eT})};var IIc=class{static D(a){M(a,{initialize:g8,destroy:g8,swa:ZIc,l7:ZIc,Ki:ZIc,OYa:g8})}async initialize(){this.Bo.Mn.local.Gqa++;const a=await wIc(this.Vy,this.Bo.Mn.G.scene.id);SIc(()=>{this.store.scene=a});if(this.$R){await this.Hk.aPb;var b=await FIc(a.files.yYa);SIc(()=>{this.store.XBa=!0});this.store.tVa=e8(()=>this.Ki,()=>this.OYa(b),{fireImmediately:!0});this.store.qpb=e8(()=>[this.Bo.Mn.G.config.ref.rotationPhi,this.Bo.Mn.G.config.ref.rotationTheta],this.Vub,{fireImmediately:!0})}}destroy(){this.Bo.Mn.local.Gqa--;
this.Bo.Mn.local.Gqa===0&&this.zh.dispose();this.$R&&(this.store.tVa?.(),this.store.qpb?.())}get swa(){return this.c0a&&this.$R&&!this.zh.Ae||this.H_a&&!this.zh.Ae||this.$R&&this.c0a&&!this.Ki?0:this.H_a?1:this.Tab?2:this.l7?3:this.wg?4:5}get l7(){return this.store.scene?.files.W6a}get c0a(){return this.Bo.Mn.local.yeb}get Tab(){return this.Bo.Mn.G.config.ref.snapshot?.id}get wg(){return this.store.scene==null}get $R(){return this.aWa&&this.Bo.se===30}get Ki(){return this.Bo.Mn.local.selected}get H_a(){return this.aWa&&
this.$R&&this.Ki&&this.store.XBa}get zh(){return this.Bo.Mn.local.zh}get G(){return this.Bo.Mn.G}constructor(a,b,c,d,e,f){this.store=a;this.Bo=b;this.aWa=c;this.Vy=d;this.vY=e;this.Hk=f;this.OYa=(IIc.D(this),g=>{this.Ki?(this.zh.initialize(g),this.Bo.Mn.local.WBa=!0):(this.zh.dispose(),this.Bo.Mn.local.WBa=!1)});this.Vub=()=>{this.zh.Ae||this.zh.M$a({rotation:{x:this.Bo.Mn.G.config.ref.rotationPhi,y:this.Bo.Mn.G.config.ref.rotationTheta,z:0}})}}};var HIc=class{static D(a){M(a,{XBa:f8.ref,scene:f8.ref})}constructor(){this.tVa=(HIc.D(this),void 0);this.XBa=!1}};var JIc=__c.uc("4260f337",!1);var RIc=class{static D(a){M(a,{Mn:f8.ref,se:f8.ref,On:f8.ref})}constructor(a,b,c){RIc.D(this);this.Mn=a;this.se=b;this.On=c}};var iJc=class{get aPb(){return this.$ib}get canvas(){return this.fK}get ofb(){return this.Gsa}getImageData(){if(!this.Gsa)throw Error("WebGlRenderer is not initialized");return this.Gsa?.readPixels()}constructor(a){this.I=a;this.fK=document.createElement("canvas");this.fK.width=1E3;this.fK.height=1E3;this.fK.style.width="100%";this.fK.style.visibility="visible";const b=this.fK.getContext("webgl");if(b!=null)this.bPb=b;else throw a.Lb("Failed to get WebGL context for scene widget"),Error("Failed to get WebGL context for scene widget");
this.$ib=XIc(this)}};var jJc=__c.K_()(()=>({VUb(a,b,c){return{data:{G:{scene:{type:"scene",id:a,version:0},config:{snapshot:void 0,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},O:{width:b,height:c}}},WUb(a,b,c,d){return{data:{G:{scene:{type:"scene",id:a,version:0},config:{snapshot:b,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},O:{width:c,height:d}}}}));var kJc=__c.U_({G:__c.T_({scene:c1.Mm(1,"SceneRef"),config:c1.nua(2,{snapshot:c1.$Db(1,"MediaRef"),rotationPhi:c1.BVa(2,{min:0,max:6.284}),rotationTheta:c1.BVa(3,{min:-1.571,max:1.571})})})});var lJc;lJc=__c.C_()(({oi:a,aQ:b})=>{b=b.I.Vf("scene_widget_rendering");const c=new iJc(b),d=new bJc(c);a=TIc({vY:d,Vy:a.Vy,Hk:c});return{metadata:{type:void 0,name:void 0},r4:()=>{const e=BIc({vY:d,Hk:c});return new cJc(e)},G:__c.B_(a),exports:{}}});__c.i0={};__c.i0.HRb=cJc;__c.i0.hi=jJc;__c.i0.Ld=lJc;__c.i0.ii=kJc;
}).call(self, self._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/071d6e0c25cff6c8.js.map