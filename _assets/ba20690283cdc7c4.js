(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[73760],{

/***/ 555723:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(673158);__web_req__(462434);self._5f74ec40302898c5a55451c9fbd04240 = self._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var W=__c.W;var H=__c.H;
var Y4c=function(a,b){const c=b.subscribe({next:d=>{d.kind==="CREATE_COMMENT"?a.xPa(d.ZC):d.kind==="DELETE_COMMENT"?a.P7a(d.Gx):d.kind==="VOTE_UPDATE"&&a.bab(d.PU.Gx,d.PU.PU,d.cbc?"updated":void 0)}});return()=>c.unsubscribe()},Z4c=function(a,b){const c=b.subscribe({next:d=>{d.kind==="PARTICIPANT_STATUS"&&a.reb(d.Hac)}});return()=>c.unsubscribe()},d5c=async function(a,b){const c=new $4c(b.id,a.ga),d=new a5c(c.hva,c.p$a,a.pu,a.ga,b.id,a.I,a.hf),e=new b5c;var {qhb:f}=await __webpack_require__.me(290811).then(()=>({qhb:__c.X4c}));
f=new f(()=>c5c);a.connect({sessionId:b.id,Gt:d,jB:e,uS:f});a.setState({status:3,session:b,jB:e,LK:c,Gt:d,uS:f});d.tGb(b.id)},e5c={Od:"live_presentation_session_actioned",Ue(a){return __c.pr({presenting_context:a.xd==null?void 0:__c.WG(a.xd),session_id:a.sessionId,source:a.source,action:a.action,design_id:a.dg,doctype_id:a.Gm,category_id:a.Bc})}},f5c={Od:"live_audience_comment_displayed",Ue(a){return __c.pr({presenting_context:a.xd==null?void 0:__c.WG(a.xd),session_id:a.sessionId,comment_id:a.Gx,
source:a.source,design_id:a.dg,doctype_id:a.Gm,category_id:a.Bc})}},g5c={Od:"live_presentation_comment_sorting_interacted",Ue(a){return __c.pr({presenting_context:a.xd==null?void 0:__c.WG(a.xd),session_id:a.sessionId,sort_order:a.Ou,action:a.action})}},M$=__webpack_require__(186901),h5c=M$.EW,i5c=M$.h5,N$=M$.sH,O$=M$.XI;var j5c=__webpack_require__(388909).t;var k5c=__webpack_require__(460537).f;var l5c=__webpack_require__(450117).B7;var m5c=H(()=>({Hi:W("documentId",1)}));var n5c=H(()=>({upb:__c.X(2),Hi:W(3)}));var o5c=H(()=>({id:W(1)}));var p5c=H(()=>({LJb:__c.LI(1),MJb:__c.LI(2,!0)}));var q5c=H(()=>({sessionId:W(1),DKb:__c.G(2,p5c)}));var $4c=class{static D(a){__c.M(a,{aL:N$.ref,p$a:O$.bound,hva:O$.bound})}p$a(a){this.aL=a;this.ga.track(f5c,{sessionId:this.sessionId,Gx:this.aL.id,source:"fullscreen_mode",dg:""})}hva(){this.aL=void 0}constructor(a,b){this.sessionId=a;this.ga=b;this.aL=($4c.D(this),void 0)}};var r5c=H(()=>({sessionId:W(1),Gx:W(2)}));var s5c=H(()=>({sessionId:W(1),Gx:W(2)}));var t5c=H(()=>({sessionId:W(1),Gx:W(2)}));var u5c=H(()=>({sessionId:W(1)}));var v5c=({comments:a,Ou:b,xub:c})=>{switch(b){case "NEWEST":return a.sort((d,e)=>e.fD-d.fD);case "OLDEST":return a.sort((d,e)=>d.fD-e.fD);case "TOP_VOTED":return a.sort((d,e)=>{const f=c(e.id)-c(d.id);return f!==0?f:d.fD-e.fD});default:throw Error(`Unknown sort order: ${b}`);}};var a5c=class{static D(a){__c.M(a,{comments:N$.deep,c9:N$.ref,Ou:N$.ref,$P:N$.shallow,MK:N$.shallow,T$a:O$.bound,B7a:O$.bound,VLa:O$.bound,xPa:O$.bound,bab:O$,P7a:O$.bound,Y2a:O$.bound,G4:O$.bound})}T$a(a){this.Ou=a;this.VLa();this.ga.track(g5c,{sessionId:this.sessionId,Ou:this.Ou.toLowerCase(),action:"change_sort_order"})}B7a(){this.VLa();this.ga.track(g5c,{sessionId:this.sessionId,Ou:this.Ou.toLowerCase(),action:"refresh"})}VLa(){this.comments=v5c({comments:this.comments,Ou:this.Ou,xub:a=>this.$P.get(a)||
0})}xPa(a){this.comments.findIndex(({id:b})=>b===a.id)===-1&&(this.comments=this.Ou==="NEWEST"?[this.zcb(a),...this.comments]:[...this.comments,this.zcb(a)],this.Isa&&this.c9++)}P7a(a){this.comments=this.comments.filter(({id:b})=>b!==a)}Y2a(){this.c9=0}pAb(){this.Isa=!1}qAb(){this.Isa=!0}RMa(a){this.MK.has(a)?this.jUa(a):this.sTa(a)}constructor(a,b,c,d,e,f,g){this.JAa=a;this.fxa=b;this.pu=c;this.ga=d;this.sessionId=e;this.I=f;this.hf=g;this.comments=(a5c.D(this),[]);this.c9=0;this.Ou="NEWEST";this.$P=
new Map;this.MK=new Set;this.Isa=!1;this.bab=(h,k,l)=>{this.$P.set(h,k);l==="voted"?this.MK.add(h):l==="updated"&&(this.MK.has(h)?this.MK.delete(h):this.MK.add(h))};this.jUa=async h=>{try{await this.pu.jUa(new s5c({sessionId:this.sessionId,Gx:h}))}catch(k){this.I.Lb(k)}};this.sTa=async h=>{try{await this.pu.sTa(new t5c({sessionId:this.sessionId,Gx:h}))}catch(k){this.I.Lb(k)}};this.tGb=async h=>{try{const k=await this.pu.i_b(new u5c({sessionId:h}));i5c(()=>{k.b6b.forEach(l=>{this.MK.add(l)});k.Nbc.forEach(l=>
{this.$P.set(l.Gx,l.PU)})})}catch(k){this.I.Lb(k)}};this.zcb=h=>{this.$P.has(h.id)||this.$P.set(h.id,0);return{...h,JAa:()=>this.JAa(),fxa:()=>this.fxa(h),NY:!1,G4:()=>this.G4(h.id),PU:h5c(()=>this.$P.get(h.id)||0),XOb:h5c(()=>this.MK.has(h.id)),RMa:k=>this.RMa(k)}};this.G4=async h=>{const k=this.comments.find(({id:l})=>l===h);if(k!==void 0&&!k.NY){k.NY=!0;try{await this.pu.G4(new r5c({sessionId:this.sessionId,Gx:h}))}catch(l){this.hf.mx({Cy:__c.K("ojlXGA")}),this.I.Lb(l)}finally{i5c(()=>k.NY=!1)}}}}};var c5c={origin:{x:.05,width:.15,y:1,height:0},wKb:{x:{min:-100,max:100},y:{min:-500,max:-300}}};var b5c=class{static D(a){__c.M(a,{count:N$.ref,reb:O$.bound})}reb(a){this.count=a}constructor(){this.count=(b5c.D(this),0)}};var w5c,x5c;w5c=Symbol("Error starting live session");
x5c=class{static D(a){__c.M(a,{state:N$.ref,Xca:N$.ref,dQ:h5c,connect:O$,setState:O$})}get dQ(){if(this.Sa.status===2)return 3;if(this.Xca)return 2;const a=this.pu.dQ;switch(a){case 2:return 0;case 1:return 1;case 0:case 3:return 2;default:throw new __c.E(a);}}async XLa(a,b){const c=this.state.session;c&&(await this.pu.XLa({sessionId:c.id,body:{data:a}}),this.setState({...this.state,session:{...this.state.session,Zc:b}}))}constructor(a,b,c,d,e,f,g){this.hf=a;this.pu=b;this.I=c;this.Sa=d;this.Hi=e;
this.ga=f;this.qga=g;this.state=(x5c.D(this),{status:0});this.Xca=!1;this.o2=[];this.YX=async()=>{if(this.state.status===0){var h=this.Hi;try{const {session:k}=await this.pu.csb(new m5c({Hi:h}));k&&await d5c(this,k)}catch(k){this.I.Lb(k)}}};this.startSession=async()=>{if(this.state.status===0||this.state.status===2){this.setState({status:1});var h=this.Hi;try{const l=await this.pu.csb(new m5c({Hi:h}));if(l.session)await d5c(this,l.session),this.hf.mx({Cy:__c.K("dX07Ng")});else{var k=await this.pu.XUb(new n5c({Hi:h,
upb:this.qga?.default}));await d5c(this,k.session);this.ga.track(e5c,{sessionId:k.session.id,source:"fullscreen_mode",action:"new_session",dg:""})}}catch(l){this.setState({status:2}),this.hf.mx({Cy:__c.K("iUnTqw"),vC:{zx:__c.K("T9Fgtw"),onClick:this.startSession},group:w5c}),this.I.Lb(l)}}};this.CKb=async()=>{if(this.state.status===3||this.state.status===5){this.setState({...this.state,status:4});var h=this.state,k=this.state.session;try{await this.pu.vVb(new o5c({id:k.id})),this.dispose(),this.setState({status:0}),
this.ga.track(e5c,{sessionId:k.id,source:"fullscreen_mode",action:"end_session",dg:""})}catch(l){l instanceof __c.JH?(this.dispose(),this.setState({status:0})):this.setState({...h,status:5})}}};this.connect=({sessionId:h,Gt:k,jB:l,uS:m})=>{this.dispose();h=this.pu.Amb(new q5c({sessionId:h,DKb:{LJb:!1,MJb:!0}}),j5c);h=k5c(()=>new l5c)(h);this.Xca=!1;this.jPa=h.subscribe({next:p=>{p.kind==="SESSION_EXPIRED"&&(this.dispose(),this.setState({status:0}))},error:p=>{this.state.session&&(this.dispose(),this.I.error(p),
i5c(()=>this.Xca=!0))}});k=Y4c(k,h);l=Z4c(l,h);const n=h.subscribe({next:p=>{p.kind==="CREATE_REACTION"&&m.mjb(p.reaction)}});this.o2.push(l);this.o2.push(k);this.o2.push(()=>n.unsubscribe());h.connect()};this.cvb=h=>{if(this.state.session)switch(h){case 0:case 1:case 3:this.dispose();break;case 2:this.connect({sessionId:this.state.session.id,Gt:this.state.Gt,jB:this.state.jB,uS:this.state.uS});break;default:throw new __c.E(h);}};this.setState=h=>{this.state=h};this.dispose=()=>{this.o2.forEach(h=>
h());this.o2=[];this.jPa?.unsubscribe();this.jPa=void 0};this.pu.sUb.subscribe(this.cvb);this.YX()}};__c.v_a={};__c.v_a.rhb=x5c;
}).call(self, self._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/ba20690283cdc7c4.js.map