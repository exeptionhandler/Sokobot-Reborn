(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[89788],{

/***/ 31023:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);self._5f74ec40302898c5a55451c9fbd04240 = self._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var X=__c.X;var H=__c.H;
var Vnc=async function(a,b){b=b.Wab.map(c=>a.iSa[c]).filter(c=>!!c);return new Unc({closedCaptions:b})},Xnc=function(a,b){const c=[];let d=0,e=0;for(;d<a.length&&e<b.length;){const f=a[d],g=b[e];Wnc(f,g)?(c.push(f),d++,e++):f.vr<g.vr?(c.push(f),d++):(c.push(g),e++)}for(;d<a.length;)c.push(a[d]),d++;for(;e<b.length;)(a=c?.[c.length-1])&&Wnc(a,b[e])||c.push(b[e]),e++;return c},Znc=async function(a){for(var b of a.My.keys()){const c=a.XFa.get(b)??0;c>=100?a.b0(b):a.XFa.set(b,c+1)}b=Array.from(a.My,([c,
d])=>({id:c,Zd:d}));b=await Ync(a,b);(await Promise.allSettled(b.closedCaptions.map(async c=>{if(c.Vs){var d=a.My.get(c.Vs);a.via(c,d);c.status==="IMPORTED"&&await a.Lya(c.Vs,c.C3)}}))).forEach(c=>{c.status==="rejected"&&a.I?.error(c.reason)})},aoc=function(a){var b=window;let c;const d=()=>{c=b.setTimeout(async()=>{Znc(a).catch(e=>a.I?.error(e)).finally(()=>c!=null&&d())},1E4)};$nc(()=>a.i6a,e=>{e?d():(b.clearTimeout(c),c=void 0)},{fireImmediately:!0})},Ync=async function(a,b){b=new boc({Wab:b.map(c=>
c.id),SJb:b.map(c=>c.Zd).filter(__c.mb),mBa:void 0,Wrb:!0});return await Vnc(a.FW,b)},doc=async function(a,b){b.forEach(h=>{a.LIa(h.id,h.Zd)});const c=(await Ync(a,b).catch(h=>{b.forEach(k=>a.b0(k.id));throw Error(h);})).closedCaptions,d=new Map,[e,f]=__c.xD(b,h=>c.some(k=>k.Vs===h.id&&k.mBa===void 0));e.forEach(h=>{const k=c.find(l=>l.Vs===h.id);k&&(d.set(h.id,k.C3),a.via(k,h.Zd))});const g=f.map(async h=>{const k=await coc(a,h);a.via(k,h.Zd);d.set(h.id,k.C3)});(await Promise.allSettled(g)).forEach(h=>
{h.status==="rejected"&&a.I?.error(h.reason)});return d},coc=async function(a,b){try{const c=await a.ifa(b);return(await a.Nia(c.N3.id,b.Zd)).N3}catch(c){throw a.b0(b.id),c;}},eoc=async function(a,b){const c=__c.y(b.url);a=await a.fetch(c);__c.x(Array.isArray(a));a=a.map(d=>{d=__c.ma(d);return{text:__c.qFa.required("text",d),vr:__c.W7a.optional("startTimeUs",d)||0,K:__c.W7a.optional("durationUs",d)||0}});return{url:c,rlb:{kM:b.kM,dea:a,sja:!0}}},Wnc=function(a,b){return a.vr<b.vr+b.K&&a.vr+a.K>b.vr},
foc=H(()=>({i8b:__c.W(1),params:(0,__c.OI)(2)})),goc=H(()=>({N3:__c.La(1,__c.dY),ebc:__c.G(2,foc)})),hoc=H(()=>({N3:__c.La(1,__c.dY)}));__c.cI.prototype.Nia=__c.da(25,async function(){return new hoc({N3:__c.eY})});__c.cI.prototype.OW=__c.da(24,async function(){throw Error("Not implemented");});__c.cI.prototype.ifa=__c.da(23,async function(){return new goc({N3:__c.eY})});var Unc=H(()=>({closedCaptions:__c.Ma(1,__c.dY)})),M3=__webpack_require__(186901),ioc=M3.EW,joc=M3.h5,$nc=M3.mJ,N3=M3.sH,O3=M3.XI;var koc=__webpack_require__(450117).B7;var loc=H(()=>({Vs:__c.W(1),raa:X(2),yKa:__c.HI(3)}));var boc=H(()=>({type:__c.F("A?",1,"SOURCEIDS"),Wab:__c.KI(1),SJb:__c.KI(2),mBa:X(3),Wrb:__c.MI(4)}));var moc=H(()=>({J7b:X(1),K7b:X(2),type:__c.F("A?",3,"AUTO"),Vs:__c.W(31),DN:__c.MI(32),NG:X(33),raa:X(34)}));var noc=H(()=>({id:__c.W(1),raa:X(2)}));var ooc;
ooc=class{static D(a){__c.M(a,{tW:N3.shallow,My:N3.shallow,H5:N3.shallow,XFa:N3.shallow,doa:O3,i6a:ioc,yIa:O3,LIa:O3,b0:O3.bound,Lya:O3,via:O3.bound})}$ha(a){return this.tW.get(a)}doa(a,b){this.tW.set(a,b);this.H5.delete(a)}NBa(a){return this.My.has(a)&&!this.tW.has(a)}get i6a(){return this.My.size>0}get KBa(){return this.uY.UT}yIa(a){this.uY.UT=a}LIa(a,b){this.My.set(a,b)}qja(a){return this.H5.has(a)}b0(a){this.H5.add(a);this.My.delete(a)}async ZIa({media:a,sHb:b,onError:c}){if(!this.FW.OW)return!1;if(this.tW.get(a.id)?.sja||
this.qja(a.id))return!0;this.Daa.get(a)&&(this.I?.SJ("Requesting new connection for media with existing connection"),this.Kba(a));var d=this.uPa+(window.navigator.connection?.rtt??0)*1E3*2;const e=performance.now();d=await this.OW(a.id,a.Zd,a.Kt+d);let f=!1;this.Daa.set(a,d.subscribe(g=>{joc(()=>{if(!f&&g.resultType!==3){const h=(performance.now()-e)*1E3;h>3E6&&b&&(this.uPa=h)}f=!0;g.UJ.length&&this.DEa(a.id,g)})},g=>{c?.();this.Daa.delete(a);this.b0(a.id);this.I?.error(g)}));return!0}Kba(a){this.Daa.get(a)?.unsubscribe();
this.Daa.delete(a)}DEa(a,b){var c=this.tW.get(a);if(!c?.sja)if(b.resultType===3)b={kM:b.kM,dea:[...b.UJ],sja:!0},this.doa(a,b),this.My.delete(a),this.H5.delete(a);else{var d=this.ESa.get(a);c=[d?.reduce((e,f)=>Xnc(e,f.UJ),[])??[],b.UJ,c?.dea??[]].reduce((e,f)=>Xnc(e,f),[]);this.doa(a,{kM:b.kM,dea:c,sja:!1});b.isPartial||this.ESa.set(a,d?[...d,b]:[b])}}async OW(a,b,c){if(!this.FW.OW)throw Error();const d=new koc;return await this.FW.OW(new loc({Vs:a,raa:b,yKa:c}),d)}async qha(a){const b=d=>this.My.has(d)||
this.$ha(d);a=__c.me(a,d=>d.id).filter(d=>!b(d.id));if(!(a.length<1)){var c=await doc(this,a);await Promise.all(a.map(d=>this.Lya(d.id,c.get(d.id))))}}async Lya(a,b){if(b&&b.length!==0)for(const c of b)if(c.url){b=await eoc(this,c);this.doa(a,b.rlb);break}}async ifa(a){a=new moc({Vs:a.id,raa:a.Zd,NG:void 0,DN:!0});return await this.FW.ifa(a)}async Nia(a,b){a=new noc({id:a,raa:b});return await this.FW.Nia(a)}via(a,b){const c=a.Vs,d=a.UX;if(c)switch(a.status){case "UPLOADING":case "PROCESSING":this.LIa(c,
b);break;case "FAILED":if(d==="NO_AUDIO_STREAM"){this.My.delete(c);break}this.b0(c);break;case "IMPORTED":this.My.delete(c)}}constructor(a,b,c,d,e=f=>window.fetch(f).then(g=>g.json())){this.FW=a;this.uY=b;this.NG=c;this.I=d;this.fetch=e;this.tW=(ooc.D(this),new Map);this.ESa=new Map;this.uPa=3E6;this.My=new Map;this.H5=new Set;this.XFa=new Map;this.Daa=new Map;aoc(this)}};__c.s5b={};__c.s5b.fgb=ooc;
}).call(self, self._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/229704daec6ad59c.js.map